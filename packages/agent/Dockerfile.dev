# Development Dockerfile with hot-reload
# Using slim instead of alpine for glibc compatibility (required by chromadb-default-embed/onnxruntime)
FROM node:20-slim

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm ci --legacy-peer-deps

# Copy source (will be overwritten by volume mount)
COPY tsconfig.json ./
COPY src ./src

# Run with tsx watch for hot-reloading
CMD ["npx", "tsx", "watch", "src/index.ts"]
